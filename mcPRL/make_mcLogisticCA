CUDA_INSTALL_PATH = /usr/local/cuda-9.0
MPI_INSTALL_PATH = /opt/openmpi
NVCC = $(CUDA_INSTALL_PATH)/bin/nvcc  
MPICC = $(MPI_INSTALL_PATH)/bin/mpic++  
LIBS =  -L$(CUDA_INSTALL_PATH)/lib64 -lcudart -lcurand -lgdal
CUDAINCLUDE = -I $(CUDA_INSTALL_PATH)/include
MPICCINCLUDE = -I $(MPI_INSTALL_PATH)/include
CFILES = pgtiol-dataset.cpp  pgtiol-gTiffData.cpp  pgtiol-gTiffManager.cpp  pgtiol-gTiffMetaData.cpp mcPRL-basicTypes.cpp mcPRL-cellspaceGeoinfo.cpp mcPRL-cellspaceInfo.cpp mcPRL-cellspace.cpp mcPRL-cellStream.cpp  mcPRL-exchangeMap.cpp mcPRL-layer.cpp mcPRL-neighborhood.cpp mcPRL-ownershipMap.cpp mcPRL-process.cpp mcPRL-smplDcmp.cpp mcPRL-subCellspace.cpp mcPRL-subCellspaceInfo.cpp  
CUFILES = cuCA.cu mcPRL-transition.cu mcPRL-transferInfo.cu mcPRL-dataManager.cu cuLogisticCA.cu DevicePara.cu
OBJECTS =  cuLink.o pgtiol-dataset.o  pgtiol-gTiffData.o  pgtiol-gTiffManager.o  pgtiol-gTiffMetaData.o mcPRL-basicTypes.o mcPRL-cellspaceGeoinfo.o mcPRL-cellspaceInfo.o mcPRL-cellspace.o mcPRL-cellStream.o  mcPRL-exchangeMap.o mcPRL-layer.o mcPRL-neighborhood.o mcPRL-ownershipMap.o mcPRL-process.o mcPRL-smplDcmp.o mcPRL-subCellspace.o mcPRL-subCellspaceInfo.o cuCA.o mcPRL-transition.o mcPRL-transferInfo.o mcPRL-dataManager.o cuLogisticCA.o DevicePara.o 
EXECNAME = mcLogistic  
  
all:  
	$(MPICC) -std=c++11 -c  $(CFILES) $(CUDAINCLUDE)  
	$(NVCC)   -std=c++11  -rdc=true -c $(CUFILES) $(MPICCINCLUDE)
	$(NVCC)   -dlink -o cuLink.o cuCA.o mcPRL-transition.o mcPRL-transferInfo.o mcPRL-dataManager.o cuLogisticCA.o DevicePara.o
	$(MPICC)   -o $(EXECNAME) $(LIBS) $(OBJECTS)  
  
clean:  
	rm -f *.o$(EXECNAME)
